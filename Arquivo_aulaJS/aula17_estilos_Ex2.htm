<!DOCTYPE html>
<html lang="pt-br">
    
    <head>
        <title>Introdução ao Javascript</title> 
        <meta charset="utf-8">
        <meta name="author" content="Tiago-Perri"> 
        <meta name="description" content="Treinamento básico HTML">
        <meta name="keywords" content="html5,tech,yankton"> 

        <style type="text/css">

            body{
                font: 100%/2 sans-serif;
            }
        
            .nav{
                position: fixed;
                width: 150px;
                top: 25px;
                left: 10px;
                border: 1px solid #ccc;
            }

            .content{
                margin-left: 165px;
            }

            .nav ul{
                margin: 0;
                padding: 0;
                list-style: none;
            }
            .nav li{
                background: #ddd;
                
            }
            .nav li + li{
                margin-top: 2px;
            }
            .nav a{
                display: block;
                padding: 10px;
                text-decoration: none;
                color: black;
            }
            .nav a.actived{
                background: green;
            }

	    </style>
        
    </head>
    <body>  
        <nav class="nav">
            <ul>
                <li><a href="#s1">Seção 1</a></li>
                <li><a href="#s2">Seção 2</a></li>
                <li><a href="#s3">Seção 3</a></li>
            </ul>
        </nav>

        <main class="content">

            <h1>Javascript - Aula 17 - Ex2</h1>

            <h2 id="s1">Seção 1</h2>
            
            <p>Casamentiss faiz malandris se pirulitá. Praesent malesuada urna nisi, quis volutpat erat hendrerit non. Nam vulputate dapibus. Aenean aliquam molestie leo, vitae iaculis nisl. Pra lá , depois divoltis porris, paradis.</p> 
            <p>Casamentiss faiz malandris se pirulitá. Praesent malesuada urna nisi, quis volutpat erat hendrerit non. Nam vulputate dapibus. Aenean aliquam molestie leo, vitae iaculis nisl. Pra lá , depois divoltis porris, paradis.</p>
            <p>Casamentiss faiz malandris se pirulitá. Praesent malesuada urna nisi, quis volutpat erat hendrerit non. Nam vulputate dapibus. Aenean aliquam molestie leo, vitae iaculis nisl. Pra lá , depois divoltis porris, paradis.</p>
            <p>Casamentiss faiz malandris se pirulitá. Praesent malesuada urna nisi, quis volutpat erat hendrerit non. Nam vulputate dapibus. Aenean aliquam molestie leo, vitae iaculis nisl. Pra lá , depois divoltis porris, paradis.</p>
            <p>Casamentiss faiz malandris se pirulitá. Praesent malesuada urna nisi, quis volutpat erat hendrerit non. Nam vulputate dapibus. Aenean aliquam molestie leo, vitae iaculis nisl. Pra lá , depois divoltis porris, paradis.</p>
            <p>Casamentiss faiz malandris se pirulitá. Praesent malesuada urna nisi, quis volutpat erat hendrerit non. Nam vulputate dapibus. Aenean aliquam molestie leo, vitae iaculis nisl. Pra lá , depois divoltis porris, paradis.</p>
            <p>Casamentiss faiz malandris se pirulitá. Praesent malesuada urna nisi, quis volutpat erat hendrerit non. Nam vulputate dapibus. Aenean aliquam molestie leo, vitae iaculis nisl. Pra lá , depois divoltis porris, paradis.</p>
            <p>Casamentiss faiz malandris se pirulitá. Praesent malesuada urna nisi, quis volutpat erat hendrerit non. Nam vulputate dapibus. Aenean aliquam molestie leo, vitae iaculis nisl. Pra lá , depois divoltis porris, paradis.</p>
            <p>Casamentiss faiz malandris se pirulitá. Praesent malesuada urna nisi, quis volutpat erat hendrerit non. Nam vulputate dapibus. Aenean aliquam molestie leo, vitae iaculis nisl. Pra lá , depois divoltis porris, paradis.</p>
            <p>Casamentiss faiz malandris se pirulitá. Praesent malesuada urna nisi, quis volutpat erat hendrerit non. Nam vulputate dapibus. Aenean aliquam molestie leo, vitae iaculis nisl. Pra lá , depois divoltis porris, paradis.</p>
            <p>Casamentiss faiz malandris se pirulitá. Praesent malesuada urna nisi, quis volutpat erat hendrerit non. Nam vulputate dapibus. Aenean aliquam molestie leo, vitae iaculis nisl. Pra lá , depois divoltis porris, paradis.</p>
            <p>Casamentiss faiz malandris se pirulitá. Praesent malesuada urna nisi, quis volutpat erat hendrerit non. Nam vulputate dapibus. Aenean aliquam molestie leo, vitae iaculis nisl. Pra lá , depois divoltis porris, paradis.</p>
            
            <h2 id="s2">Seção 2</h2>

            <p>Casamentiss faiz malandris se pirulitá. Praesent malesuada urna nisi, quis volutpat erat hendrerit non. Nam vulputate dapibus. Aenean aliquam molestie leo, vitae iaculis nisl. Pra lá , depois divoltis porris, paradis.</p>
            <p>Casamentiss faiz malandris se pirulitá. Praesent malesuada urna nisi, quis volutpat erat hendrerit non. Nam vulputate dapibus. Aenean aliquam molestie leo, vitae iaculis nisl. Pra lá , depois divoltis porris, paradis.</p>
            <p>Casamentiss faiz malandris se pirulitá. Praesent malesuada urna nisi, quis volutpat erat hendrerit non. Nam vulputate dapibus. Aenean aliquam molestie leo, vitae iaculis nisl. Pra lá , depois divoltis porris, paradis.</p>
            <p>Casamentiss faiz malandris se pirulitá. Praesent malesuada urna nisi, quis volutpat erat hendrerit non. Nam vulputate dapibus. Aenean aliquam molestie leo, vitae iaculis nisl. Pra lá , depois divoltis porris, paradis.</p>
            <p>Casamentiss faiz malandris se pirulitá. Praesent malesuada urna nisi, quis volutpat erat hendrerit non. Nam vulputate dapibus. Aenean aliquam molestie leo, vitae iaculis nisl. Pra lá , depois divoltis porris, paradis.</p>
            <p>Casamentiss faiz malandris se pirulitá. Praesent malesuada urna nisi, quis volutpat erat hendrerit non. Nam vulputate dapibus. Aenean aliquam molestie leo, vitae iaculis nisl. Pra lá , depois divoltis porris, paradis.</p>
            <p>Casamentiss faiz malandris se pirulitá. Praesent malesuada urna nisi, quis volutpat erat hendrerit non. Nam vulputate dapibus. Aenean aliquam molestie leo, vitae iaculis nisl. Pra lá , depois divoltis porris, paradis.</p>
            <p>Casamentiss faiz malandris se pirulitá. Praesent malesuada urna nisi, quis volutpat erat hendrerit non. Nam vulputate dapibus. Aenean aliquam molestie leo, vitae iaculis nisl. Pra lá , depois divoltis porris, paradis.</p>
            <p>Casamentiss faiz malandris se pirulitá. Praesent malesuada urna nisi, quis volutpat erat hendrerit non. Nam vulputate dapibus. Aenean aliquam molestie leo, vitae iaculis nisl. Pra lá , depois divoltis porris, paradis.</p>
            <p>Casamentiss faiz malandris se pirulitá. Praesent malesuada urna nisi, quis volutpat erat hendrerit non. Nam vulputate dapibus. Aenean aliquam molestie leo, vitae iaculis nisl. Pra lá , depois divoltis porris, paradis.</p>
            <p>Casamentiss faiz malandris se pirulitá. Praesent malesuada urna nisi, quis volutpat erat hendrerit non. Nam vulputate dapibus. Aenean aliquam molestie leo, vitae iaculis nisl. Pra lá , depois divoltis porris, paradis.</p>
            <p>Casamentiss faiz malandris se pirulitá. Praesent malesuada urna nisi, quis volutpat erat hendrerit non. Nam vulputate dapibus. Aenean aliquam molestie leo, vitae iaculis nisl. Pra lá , depois divoltis porris, paradis.</p>

            <h2 id="s3">Seção 3</h2>
            
            <p>Casamentiss faiz malandris se pirulitá. Praesent malesuada urna nisi, quis volutpat erat hendrerit non. Nam vulputate dapibus. Aenean aliquam molestie leo, vitae iaculis nisl. Pra lá , depois divoltis porris, paradis.</p>
            <p>Casamentiss faiz malandris se pirulitá. Praesent malesuada urna nisi, quis volutpat erat hendrerit non. Nam vulputate dapibus. Aenean aliquam molestie leo, vitae iaculis nisl. Pra lá , depois divoltis porris, paradis.</p>
            <p>Casamentiss faiz malandris se pirulitá. Praesent malesuada urna nisi, quis volutpat erat hendrerit non. Nam vulputate dapibus. Aenean aliquam molestie leo, vitae iaculis nisl. Pra lá , depois divoltis porris, paradis.</p>
            <p>Casamentiss faiz malandris se pirulitá. Praesent malesuada urna nisi, quis volutpat erat hendrerit non. Nam vulputate dapibus. Aenean aliquam molestie leo, vitae iaculis nisl. Pra lá , depois divoltis porris, paradis.</p>
            <p>Casamentiss faiz malandris se pirulitá. Praesent malesuada urna nisi, quis volutpat erat hendrerit non. Nam vulputate dapibus. Aenean aliquam molestie leo, vitae iaculis nisl. Pra lá , depois divoltis porris, paradis.</p>
            <p>Casamentiss faiz malandris se pirulitá. Praesent malesuada urna nisi, quis volutpat erat hendrerit non. Nam vulputate dapibus. Aenean aliquam molestie leo, vitae iaculis nisl. Pra lá , depois divoltis porris, paradis.</p>
            <p>Casamentiss faiz malandris se pirulitá. Praesent malesuada urna nisi, quis volutpat erat hendrerit non. Nam vulputate dapibus. Aenean aliquam molestie leo, vitae iaculis nisl. Pra lá , depois divoltis porris, paradis.</p>
            <p>Casamentiss faiz malandris se pirulitá. Praesent malesuada urna nisi, quis volutpat erat hendrerit non. Nam vulputate dapibus. Aenean aliquam molestie leo, vitae iaculis nisl. Pra lá , depois divoltis porris, paradis.</p>
            <p>Casamentiss faiz malandris se pirulitá. Praesent malesuada urna nisi, quis volutpat erat hendrerit non. Nam vulputate dapibus. Aenean aliquam molestie leo, vitae iaculis nisl. Pra lá , depois divoltis porris, paradis.</p>
            <p>Casamentiss faiz malandris se pirulitá. Praesent malesuada urna nisi, quis volutpat erat hendrerit non. Nam vulputate dapibus. Aenean aliquam molestie leo, vitae iaculis nisl. Pra lá , depois divoltis porris, paradis.</p>
            <p>Casamentiss faiz malandris se pirulitá. Praesent malesuada urna nisi, quis volutpat erat hendrerit non. Nam vulputate dapibus. Aenean aliquam molestie leo, vitae iaculis nisl. Pra lá , depois divoltis porris, paradis.</p>
            <p>Casamentiss faiz malandris se pirulitá. Praesent malesuada urna nisi, quis volutpat erat hendrerit non. Nam vulputate dapibus. Aenean aliquam molestie leo, vitae iaculis nisl. Pra lá , depois divoltis porris, paradis.</p>
            <p>Casamentiss faiz malandris se pirulitá. Praesent malesuada urna nisi, quis volutpat erat hendrerit non. Nam vulputate dapibus. Aenean aliquam molestie leo, vitae iaculis nisl. Pra lá , depois divoltis porris, paradis.</p>
            <p>Casamentiss faiz malandris se pirulitá. Praesent malesuada urna nisi, quis volutpat erat hendrerit non. Nam vulputate dapibus. Aenean aliquam molestie leo, vitae iaculis nisl. Pra lá , depois divoltis porris, paradis.</p>

        </main>
        
        <script>
        
            (function(){
                
                window.addEventListener('scroll', destacaMenu);
                var $menu  = document.querySelector('.nav');
                var $links = $menu.querySelectorAll('li a'); 
                
                function destacaMenu(){
                    var positions = [];
                    for(var i = 0; i < $links.length; i++){
                        positions[i] = pegaYPosicaoScroll($links[i])
                    }
                    console.log(positions);
                    
                    var linkAtual = pegaUltimoLinkVisivel(positions);
                    
                    var linkActived = $menu.querySelector('.actived');
                    if(linkActived) linkActived.classList.remove('actived');
                    
                    linkAtual.classList.add('actived');
                }
                
                function pegaYPosicaoScroll(link){
                    var alvo = document.querySelector(link.getAttribute('href'));
                    var positionYViewport = alvo.getBoundingClientRect().top;
                    return positionYViewport;
                }
                
                function pegaUltimoLinkVisivel(positions){
                    var qtd = positions.length;
                    while(qtd){
                        qtd--;
                        if(positions[qtd] < innerHeight / 2){                            
                            return $links[qtd];
                        }
                    }
                    return $links[0];
                    
                }  
                destacaMenu();

            })()
        
        </script>
        
    </body>